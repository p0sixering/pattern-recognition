<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script type="text/javascript" src="raphael-min.js"></script>
<script type="text/javascript" src="shapes.js"></script>
</head>

<body>
<script type="text/javascript">

// Click functions
// append with:  circle.click(clickFunction);
function testClick() {
    console.log("click");
}

var allShapes = ['circle', 'triangle', 'square', 'diamond', 'rectangle', 'pentagon', 'hexagon', 'octagon'];
var buttonData = [];
var butttonDifferences = {};

// I am mising 'area' / any way to disambiguate rectangles
function addButton(b, location, color, shape, radius) {
    // Calculate brightness
    red = parseInt(color.substring(1, 3), 16);
    green = parseInt(color.substring(3, 5), 16);
    blue = parseInt(color.substring(5, 7), 16);
    brightness = red + green + blue / 3;

    // Get side count
    var sides;
    if (shape == 'circle') {
        sides = 0;
    } else if (shape == 'triangle') {
        sides = 3;
    } else if (shape == 'pentagon') {
        sides = 5;
    } else if (shape == 'hexagon') {
        sides = 6;
    } else if (shape == 'octagon') {
        sides = 8;
    } else {
        sides = 4;
    }

    // I am sure there is a cute way to get this programmaticaly, but I won't sweat it for now
    // also I need to sort out "radius" for rectangles
    radius = radius.x;
    if (radius < 8) {
        size = 'tiny';
    } else if (radius < 16) {
        size = 'small';
    } else if (radius < 32) {
        size = 'medium';
    } else if (radius < 64) {
        size = 'large';
    } else if (radius < 128) {
        size = 'huge';
    } else if (radius < 256) {
        size = 'gigantic';
    }

    var buttonObject = {
        button: b,
        center: location, // eudlician and manhatten distance
        shape: shape, // enumerate, subtract
        sides: sides, // subtract
        radius: radius, // subtract
        size: size, // enumerate, subtract
        color: color, //, subtract
        brightness: brightness // subtract
    };
   buttonData.push(buttonObject);
}

//  ellipse, rhombus, parralellogram, trapezoid <-- do I want these?
// I think I do want ellipse.  hrm.

function makeButton(paper, location, color, shape, radius, rotation) {
    var button = buttonFunctions[shape](paper, location, radius, rotation)
    addButton(button, location, color, shape, radius, rotation);
    button.attr("fill", color);

 }

function makeRandomButton(paper) {
    var minDimension = Math.min(paper.width, paper.height);
    var maxRadius = parseInt(minDimension / 3);
    var location = {x: Math.floor((Math.random() * paper.width)), y: Math.floor((Math.random() * paper.height))};
    var color = '#' + Math.floor(Math.random() * 16777215).toString(16);
    var shapeIndex =  Math.floor(Math.random() * allShapes.length);
    var shape = allShapes[shapeIndex];
    var rotation = Math.random() * 2 * Math.PI;
    var radius = {x: Math.floor(Math.random() * maxRadius) + 1, y: Math.floor(Math.random() * maxRadius) + 1};
    makeButton(paper, location, color, shape, radius, rotation);
 }

function init() {
    // Creates canvas.
    var screensize = {x: 1024, y:  768}
    var paper = Raphael(0, 0, screensize.x, screensize.y);
    var numberOfButtons = 10;

    // Let's create a random button
    for (var i = 0; i < numberOfButtons; i++) {
        makeRandomButton(paper);
    }

    // generate differences here


}

window.onload = init;
</script>
</body>
</html>